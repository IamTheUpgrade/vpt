{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AAAA\\\\Desktop\\\\corso\\\\videogames_price_tracker\\\\vpt_fe\\\\src\\\\pages\\\\singleGame\\\\singleGamePage.js\",\n    _s = $RefreshSig$();\n\nimport { wait } from \"@testing-library/user-event/dist/utils\";\nimport { useEffect, useState } from \"react\";\nimport { useParams, useSearchParams } from \"react-router-dom\";\nimport Footer from \"../../components/footer/footer\";\nimport GameInlist from \"../../components/gameInList/gameInList\";\nimport Navbar from \"../../components/navbar/navbar\";\nimport './singleGamePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SingleGamePage = _ref => {\n  _s();\n\n  let {\n    user = false,\n    setUser = () => {}\n  } = _ref;\n  let param = useParams();\n  const [previousUrl, setPreviousUrl] = useState(\"\");\n  const [game, setGame] = useState({});\n  const [categories, setCategories] = useState([]);\n  const [languages, setLanguages] = useState([]);\n  const [subtitles, setSubtitles] = useState([]);\n  const [systems, setSystems] = useState([]);\n  const [contents, setContents] = useState([]);\n  const [gameReferenced, setGameReferenced] = useState([]);\n  const [prices, setPrices] = useState([]);\n  const [dates, setDates] = useState([]);\n  const [flexDirection, setFlexDirection] = useState(\"row-reverse\");\n  const [bellColor, setBellColor] = useState(\"black\");\n\n  if (window.location.href != previousUrl) {\n    setPreviousUrl(window.location.href);\n    fetch(\"http://localhost:8081/videogame/\" + param.title).then(response => response.json()).then(responseJSON => {\n      setGame(responseJSON);\n\n      if (user) {\n        if (user.userList.find(item => item.videogameId == responseJSON.videogameId)) setBellColor(\"#0474db\");\n      }\n\n      let categories = [];\n\n      for (const category of responseJSON.categories) {\n        categories.push(category.category);\n      }\n\n      setCategories(categories);\n      let languages = [];\n\n      for (const language of responseJSON.languages) {\n        languages.push(language.language);\n      }\n\n      setLanguages(languages);\n      let subtitles = [];\n\n      for (const subtitle of responseJSON.subtitles) {\n        subtitles.push(subtitle.subtitle);\n      }\n\n      setSubtitles(subtitles);\n      let systems = [];\n\n      for (const system of responseJSON.systems) {\n        systems.push(system.system);\n      }\n\n      setSystems(systems);\n      let contents = [];\n\n      for (const content of responseJSON.contents) {\n        contents.push(content.content);\n      }\n\n      setContents(contents);\n      let priceHistory = [];\n\n      for (const price of responseJSON.priceHistory) {\n        priceHistory.push(price);\n      }\n\n      setPriceHistory(priceHistory);\n\n      (async function getGamesReferenced() {\n        let gamesReferenced = [];\n\n        for (const gameReferenced of responseJSON.gameReferenced) {\n          let response = await fetch(\"http://localhost:8081/videogame?id=\" + gameReferenced.reference);\n          let responseJSON = await response.json();\n          gamesReferenced.push(responseJSON);\n        }\n\n        setGameReferenced(gamesReferenced);\n      })();\n\n      createGraphic(priceHistory, responseJSON.releaseDate, responseJSON.basePrice, responseJSON.currentDiscountedPrice);\n    });\n  }\n\n  const langSub = () => {\n    const map = new Map();\n\n    for (const language of languages) {\n      map.set(language, [true]);\n    }\n\n    for (const subtitle of subtitles) {\n      if (map.has(subtitle)) map.set(subtitle, [true, true]);else map.set(subtitle, [false, true]);\n    }\n\n    let items = [];\n\n    for (const [key, value] of map.entries()) {\n      items.push( /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"lang-sub-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: key\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: value[0] ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 32\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 91\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: value[1] ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 32\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 91\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 24\n      }, this));\n    }\n\n    return items;\n  };\n\n  const createGraphic = (priceHistory, releaseDate, basePrice, currentDiscountedPrice) => {\n    let canvasGraphic = document.getElementById(\"game-priceHistory-graphic\");\n    let canvasData = document.getElementById(\"game-priceHistory-data\");\n    let canvasWidth = canvasGraphic.width;\n    let graphic = canvasGraphic.getContext(\"2d\");\n    let data = canvasData.getContext(\"2d\");\n    canvasGraphic.width = canvasGraphic.width;\n    canvasData.width = canvasData.width;\n    let prices = [];\n    let dates = [];\n    let nDates = new Date().getFullYear() - releaseDate.split(\"-\")[0];\n    if (nDates == 0) setFlexDirection(\"row\");\n\n    for (let i = 0; i <= nDates; i++) {\n      dates.push( /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: \"1vw\"\n        },\n        children: new Date().getFullYear() - i\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 24\n      }, this));\n    }\n\n    setDates(dates);\n    let differenceDate = (new Date() - new Date(releaseDate)) / 86400000;\n    data.strokeStyle = \"rgb(200, 200, 200)\";\n    data.lineWidth = 1;\n\n    for (let i = 0; i <= Math.ceil(basePrice) / 10; i++) {\n      data.moveTo(0, 300 - 300 / (Math.ceil(basePrice) / 10) * i);\n      data.lineTo(1000, 300 - 300 / (Math.ceil(basePrice) / 10) * i);\n      let marginTop = (18.5 - (Math.ceil(basePrice) / 10 + 1)) / (Math.ceil(basePrice) / 10) - 0.2;\n      prices.push( /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: \"center\",\n          marginTop: marginTop + \"vw\",\n          fontSize: \"1vw\"\n        },\n        children: i * 10\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }, this));\n    }\n\n    setPrices(prices);\n    data.stroke();\n    graphic.strokeStyle = \"#0474db\";\n    graphic.lineWidth = 3;\n    graphic.lineCap = \"round\";\n    if (basePrice == 0) graphic.moveTo(0, 300);else graphic.moveTo(0, 0);\n    let lastX = 0;\n\n    for (let i = 0; i < priceHistory.length; i++) {\n      if (i == 0) {\n        let xStartDiscount = canvasWidth * ((new Date(priceHistory[i].startDate) - new Date(releaseDate)) / 86400000) / differenceDate;\n        let yDiscount = 300 - 300 * priceHistory[i].price / basePrice;\n        let xEndDiscount = xStartDiscount + canvasWidth * ((new Date(priceHistory[i].endDate) - new Date(priceHistory[i].startDate)) / 86400000) / differenceDate;\n        lastX = xEndDiscount;\n        graphic.lineTo(xStartDiscount, 0); // move till the startDate from the basePrice in horizontal\n\n        graphic.lineTo(xStartDiscount, yDiscount); // move from startDate tiil the currentDiscountedPrice in vertical\n\n        graphic.lineTo(xEndDiscount, yDiscount); // move from x and y of the currentDiscountedPrice till endDate in horizontal\n      } else {\n        if (priceHistory[i].startDate != priceHistory[i - 1].startDate) {\n          let xStartDiscount = canvasWidth * ((new Date(priceHistory[i].startDate) - new Date(priceHistory[i - 1].endDate)) / 86400000) / differenceDate + lastX;\n          let yDiscount = 300 - 300 * priceHistory[i].price / basePrice;\n          let xEndDiscount = canvasWidth * ((new Date(priceHistory[i].endDate) - new Date(priceHistory[i].startDate)) / 86400000) / differenceDate;\n          graphic.lineTo(lastX, 0); // move till basePrice bc last endDate and this StartDate don't coincide in vertical\n\n          graphic.lineTo(xStartDiscount, 0); // move till startDate in horizontal\n\n          graphic.lineTo(xStartDiscount, yDiscount); //move till the currentDiscountedPrice in vertical\n\n          lastX = xStartDiscount;\n          graphic.lineTo(xEndDiscount + lastX, yDiscount);\n          lastX += xEndDiscount;\n        } else {\n          let yDiscount = 300 - 300 * priceHistory[i].price / basePrice;\n          let xEndDiscount = canvasWidth * ((new Date(priceHistory[i].endDate) - new Date(priceHistory[i].startDate)) / 86400000) / differenceDate;\n          graphic.lineTo(lastX, yDiscount); // move till the discountedPrice from last y bc startDate and endDate coincide in vertical\n\n          graphic.lineTo(xEndDiscount + lastX, yDiscount); // move till endDate in horizontal\n\n          lastX += xEndDiscount;\n        }\n      }\n    }\n\n    if (priceHistory.length != 0) {\n      if (currentDiscountedPrice == null) {\n        graphic.lineTo(lastX, 0); // move till basePrice in vertical\n\n        graphic.lineTo(canvasWidth * ((new Date() - new Date(priceHistory[priceHistory.length - 1].endDate)) / 86400000) / differenceDate + lastX, 0); // move in horizontal till currentDay\n      }\n    } else {\n      if (basePrice == 0) graphic.lineTo(canvasWidth * ((new Date() - new Date(releaseDate)) / 86400000) / differenceDate, 300);else graphic.lineTo(canvasWidth * ((new Date() - new Date(releaseDate)) / 86400000) / differenceDate, 0);\n    }\n\n    graphic.stroke();\n  };\n\n  const addOrDeleteGameWatchList = () => {\n    if (!user) return;\n\n    if (bellColor == \"black\") {\n      fetch(\"http://localhost:8081/watchlist?videogameId=\" + game.videogameId, {\n        method: 'POST',\n        body: JSON.stringify(user),\n        mode: 'cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(responseJSON => {\n        const userCopy = { ...user\n        };\n        userCopy.userList.push(responseJSON);\n        setUser(userCopy);\n      });\n      setBellColor(\"#0474db\");\n    } else {\n      let userCopy = { ...user\n      };\n      const watchlistItem = userCopy.userList.find(item => item.videogameId == game.videogameId);\n      userCopy.userList = userCopy.userList.filter(item => item.videogameId != game.videogameId);\n      fetch(\"http://localhost:8081/watchlist\", {\n        method: 'DELETE',\n        body: JSON.stringify(watchlistItem),\n        mode: 'cors',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json'\n        }\n      });\n      setBellColor(\"black\");\n      setUser(userCopy);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      user: user,\n      setUser: setUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"game-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-title-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"game-title\",\n          children: game.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            onClick: addOrDeleteGameWatchList,\n            style: {\n              color: bellColor\n            },\n            id: \"game-bell\",\n            className: \"fa-regular fa-bell\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 24\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-information-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"game-information\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-inf-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"game-inf-title\",\n              children: \"type:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: game.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-inf-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"game-inf-title\",\n              children: \"developer:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: game.developer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-inf-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"game-inf-title\",\n              children: \"publisher:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: game.publisher\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-inf-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"game-inf-title\",\n              children: \"release date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: game.releaseDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-inf-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"game-inf-title\",\n              children: \"categories:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: categories.join(\", \")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"game-inf-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"game-inf-title\",\n              children: \"systems:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: systems.join(\", \")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"contents-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"contents-title\",\n              children: \"contents:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              id: \"contents-list\",\n              children: contents.map((content, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: content\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 67\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"img-container\",\n          children: game.cover == null ? null : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"data:image/png;base64,\" + game.cover,\n            id: \"game-img\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-middle-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"game-middle-item-text\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"description-title\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              id: \"description-text\",\n              children: game.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"game-middle-item-lang-sub\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"lang-sub-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"lang-sub-title\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"lang\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"sub\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                id: \"lang-sub-list\",\n                children: langSub()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-price-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"base price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: game.basePrice == 0 ? \"free game\" : game.basePrice + \"€\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"discount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"game-currentDiscount\",\n            children: game.currentDiscountedPrice != null ? game.currentDiscountedPrice + \"€\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"percentage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: game.currentDiscountedPrice != null ? Math.round(100 - game.currentDiscountedPrice / (game.basePrice / 100)) + \"%\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"end date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: game.currentDiscountEndDate != null ? game.currentDiscountEndDate : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"lowest price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"game-lowestPrice\",\n            children: game.lowestPrice != null ? game.lowestPrice + \"€\" : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-priceHistory-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n          height: \"300\",\n          width: \"1000\",\n          id: \"game-priceHistory-graphic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          height: \"300\",\n          width: \"1000\",\n          id: \"game-priceHistory-data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"game-priceHistory-prices\",\n          children: prices\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"game-priceHistory-dates\",\n          style: {\n            flexDirection: flexDirection\n          },\n          children: dates\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"game-gamesReferenced-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"game-gamesReferenced-title\",\n          children: \"References\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"game-gamesReferenced-games\",\n          children: gameReferenced.map((game, index) => /*#__PURE__*/_jsxDEV(GameInlist, {\n            game: game\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 62\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SingleGamePage, \"KhFERv18fUgQ/v4WbfAHXpaZ5w8=\", false, function () {\n  return [useParams];\n});\n\n_c = SingleGamePage;\nexport default SingleGamePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"SingleGamePage\");","map":{"version":3,"names":["wait","useEffect","useState","useParams","useSearchParams","Footer","GameInlist","Navbar","SingleGamePage","user","setUser","param","previousUrl","setPreviousUrl","game","setGame","categories","setCategories","languages","setLanguages","subtitles","setSubtitles","systems","setSystems","contents","setContents","gameReferenced","setGameReferenced","prices","setPrices","dates","setDates","flexDirection","setFlexDirection","bellColor","setBellColor","window","location","href","fetch","title","then","response","json","responseJSON","userList","find","item","videogameId","category","push","language","subtitle","system","content","priceHistory","price","setPriceHistory","getGamesReferenced","gamesReferenced","reference","createGraphic","releaseDate","basePrice","currentDiscountedPrice","langSub","map","Map","set","has","items","key","value","entries","canvasGraphic","document","getElementById","canvasData","canvasWidth","width","graphic","getContext","data","nDates","Date","getFullYear","split","i","fontSize","differenceDate","strokeStyle","lineWidth","Math","ceil","moveTo","lineTo","marginTop","textAlign","stroke","lineCap","lastX","length","xStartDiscount","startDate","yDiscount","xEndDiscount","endDate","addOrDeleteGameWatchList","method","body","JSON","stringify","mode","headers","userCopy","watchlistItem","filter","color","type","developer","publisher","join","index","cover","description","round","currentDiscountEndDate","lowestPrice"],"sources":["C:/Users/AAAA/Desktop/corso/videogames_price_tracker/vpt_fe/src/pages/singleGame/singleGamePage.js"],"sourcesContent":["import { wait } from \"@testing-library/user-event/dist/utils\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport Footer from \"../../components/footer/footer\";\r\nimport GameInlist from \"../../components/gameInList/gameInList\";\r\nimport Navbar from \"../../components/navbar/navbar\";\r\n\r\nimport './singleGamePage.css'\r\n\r\nconst SingleGamePage = ({user = false, setUser = () => {}}) => {\r\n\r\n    let param = useParams();\r\n\r\n    const [previousUrl, setPreviousUrl] = useState(\"\")\r\n\r\n    const [game, setGame] = useState({});\r\n    const [categories, setCategories] = useState([]);\r\n    const [languages, setLanguages] = useState([]);\r\n    const [subtitles, setSubtitles] = useState([]);\r\n    const [systems, setSystems] = useState([]);\r\n    const [contents, setContents] = useState([]);\r\n    const [gameReferenced, setGameReferenced] = useState([]);\r\n\r\n    const [prices, setPrices] = useState([]);\r\n    const [dates, setDates] = useState([]);\r\n    const [flexDirection, setFlexDirection] = useState(\"row-reverse\");\r\n\r\n    const [bellColor, setBellColor] = useState(\"black\");\r\n\r\n    if (window.location.href != previousUrl) {\r\n        setPreviousUrl(window.location.href);\r\n        fetch(\"http://localhost:8081/videogame/\" + param.title)\r\n        .then(response => response.json())\r\n        .then(responseJSON => {\r\n            setGame(responseJSON);\r\n\r\n            if (user) {\r\n                if (user.userList.find(item => item.videogameId == responseJSON.videogameId)) setBellColor(\"#0474db\")\r\n            }\r\n\r\n            let categories = [];\r\n            for (const category of responseJSON.categories) {\r\n                categories.push(category.category)\r\n            }\r\n            setCategories(categories);\r\n\r\n            let languages = [];\r\n            for (const language of responseJSON.languages) {\r\n                languages.push(language.language)\r\n            }\r\n            setLanguages(languages);\r\n\r\n            let subtitles = [];\r\n            for (const subtitle of responseJSON.subtitles) {\r\n                subtitles.push(subtitle.subtitle)\r\n            }\r\n            setSubtitles(subtitles);\r\n\r\n            let systems = [];\r\n            for (const system of responseJSON.systems) {\r\n                systems.push(system.system)\r\n            }\r\n            setSystems(systems);\r\n\r\n            let contents = [];\r\n            for (const content of responseJSON.contents) {\r\n                contents.push(content.content)\r\n            }\r\n            setContents(contents);\r\n\r\n            let priceHistory = [];\r\n            for (const price of responseJSON.priceHistory) {\r\n                priceHistory.push(price)\r\n            }\r\n            setPriceHistory(priceHistory);\r\n\r\n            (async function getGamesReferenced() {\r\n                let gamesReferenced = [];\r\n\r\n                for (const gameReferenced of responseJSON.gameReferenced) {\r\n                    let response = await fetch(\"http://localhost:8081/videogame?id=\" + gameReferenced.reference)\r\n                    let responseJSON = await response.json();\r\n                    gamesReferenced.push(responseJSON)\r\n                }\r\n                setGameReferenced(gamesReferenced);\r\n            })();\r\n            \r\n            createGraphic(priceHistory, responseJSON.releaseDate, responseJSON.basePrice, responseJSON.currentDiscountedPrice)\r\n\r\n        });\r\n\r\n    }\r\n\r\n    const langSub = () => {\r\n        const map = new Map();\r\n\r\n        for (const language of languages) {\r\n            map.set(language, [true])\r\n        }\r\n        for (const subtitle of subtitles) {\r\n            if (map.has(subtitle)) map.set(subtitle, [true, true])\r\n            else  map.set(subtitle, [false, true])\r\n        }\r\n\r\n        let items = [];\r\n\r\n        for (const [key, value] of map.entries()) {\r\n            items.push(<li key={key} className=\"lang-sub-item\">\r\n                <p>{key}</p>\r\n                <p>{value[0] ? <span className=\"material-symbols-outlined\">check</span> : <span className=\"material-symbols-outlined\">close</span>}</p>\r\n                <p>{value[1] ? <span className=\"material-symbols-outlined\">check</span >: <span className=\"material-symbols-outlined\">close</span>}</p>\r\n            </li>)\r\n        }\r\n\r\n        return items;\r\n\r\n    }\r\n\r\n    const createGraphic = (priceHistory, releaseDate, basePrice, currentDiscountedPrice) => {\r\n\r\n        let canvasGraphic = document.getElementById(\"game-priceHistory-graphic\");\r\n        let canvasData = document.getElementById(\"game-priceHistory-data\");\r\n        let canvasWidth = canvasGraphic.width;\r\n        let graphic = canvasGraphic.getContext(\"2d\");\r\n        let data = canvasData.getContext(\"2d\");\r\n\r\n        canvasGraphic.width = canvasGraphic.width;\r\n        canvasData.width = canvasData.width;\r\n\r\n\r\n        let prices = [];\r\n        let dates = [];\r\n\r\n        let nDates = new Date().getFullYear() - releaseDate.split(\"-\")[0];\r\n\r\n        if (nDates == 0) setFlexDirection(\"row\")\r\n\r\n        for (let i = 0; i <= nDates; i++) {\r\n            dates.push(<p key={i} style={{fontSize: \"1vw\"}}>{new Date().getFullYear() - i}</p>)\r\n        }\r\n\r\n        setDates(dates)\r\n\r\n        let differenceDate = (new Date() - new Date(releaseDate)) / 86400000;\r\n\r\n        data.strokeStyle = \"rgb(200, 200, 200)\";\r\n        data.lineWidth = 1;\r\n\r\n        for (let i = 0; i <= (Math.ceil(basePrice) / 10); i++) {\r\n            data.moveTo(0, 300 - (300 / (Math.ceil(basePrice) / 10) * i));\r\n            data.lineTo(1000, 300 - (300 / (Math.ceil(basePrice) / 10) * i));\r\n            let marginTop = ((18.5 - (Math.ceil(basePrice) / 10 + 1)) / (Math.ceil(basePrice) / 10)) - 0.2;\r\n            prices.push(<p key={i} style={{textAlign: \"center\", marginTop: marginTop + \"vw\", fontSize: \"1vw\" }}>{i * 10}</p>)\r\n        }\r\n\r\n        setPrices(prices)\r\n\r\n        data.stroke()\r\n\r\n        graphic.strokeStyle =\"#0474db\";\r\n        graphic.lineWidth = 3;\r\n        graphic.lineCap = \"round\";\r\n\r\n        if (basePrice == 0) graphic.moveTo(0, 300);\r\n        else graphic.moveTo(0, 0);\r\n\r\n        let lastX = 0;\r\n\r\n\r\n        for (let i = 0; i < priceHistory.length; i++) {\r\n            if (i == 0 ) {\r\n                \r\n                let xStartDiscount = canvasWidth * ((new Date(priceHistory[i].startDate) - new Date(releaseDate)) / 86400000) / differenceDate;\r\n                let yDiscount = 300 - (300 * priceHistory[i].price) / basePrice;\r\n                let xEndDiscount = xStartDiscount + (canvasWidth * ((new Date(priceHistory[i].endDate) - new Date(priceHistory[i].startDate)) / 86400000) / differenceDate);\r\n                lastX = xEndDiscount;\r\n\r\n                graphic.lineTo(xStartDiscount, 0) // move till the startDate from the basePrice in horizontal\r\n                graphic.lineTo(xStartDiscount, yDiscount) // move from startDate tiil the currentDiscountedPrice in vertical\r\n                graphic.lineTo(xEndDiscount, yDiscount) // move from x and y of the currentDiscountedPrice till endDate in horizontal\r\n\r\n            } else {\r\n                \r\n                if (priceHistory[i].startDate != priceHistory[i - 1].startDate) {\r\n\r\n                    let xStartDiscount = canvasWidth * ((new Date(priceHistory[i].startDate) - new Date(priceHistory[i - 1].endDate)) / 86400000) / differenceDate + lastX;\r\n                    let yDiscount = 300 - (300 * priceHistory[i].price) / basePrice;\r\n                    let xEndDiscount = canvasWidth * ((new Date(priceHistory[i].endDate) - new Date(priceHistory[i].startDate)) / 86400000) / differenceDate;\r\n\r\n                    graphic.lineTo(lastX, 0); // move till basePrice bc last endDate and this StartDate don't coincide in vertical\r\n                    graphic.lineTo(xStartDiscount, 0) // move till startDate in horizontal\r\n                    graphic.lineTo(xStartDiscount, yDiscount) //move till the currentDiscountedPrice in vertical\r\n                    lastX = xStartDiscount\r\n                    graphic.lineTo(xEndDiscount + lastX, yDiscount)\r\n                    lastX += xEndDiscount;\r\n\r\n                } else {\r\n\r\n                    let yDiscount = 300 - (300 * priceHistory[i].price) / basePrice;\r\n                    let xEndDiscount = canvasWidth * ((new Date(priceHistory[i].endDate) - new Date(priceHistory[i].startDate)) / 86400000) / differenceDate;\r\n\r\n                    graphic.lineTo(lastX, yDiscount); // move till the discountedPrice from last y bc startDate and endDate coincide in vertical\r\n                    graphic.lineTo(xEndDiscount + lastX, yDiscount); // move till endDate in horizontal\r\n                    lastX += xEndDiscount;\r\n\r\n                }\r\n\r\n            }\r\n            \r\n        }\r\n\r\n        if (priceHistory.length != 0) {\r\n            if (currentDiscountedPrice == null) {\r\n                graphic.lineTo(lastX, 0) // move till basePrice in vertical\r\n                graphic.lineTo(canvasWidth * ((new Date() - new Date(priceHistory[priceHistory.length - 1].endDate)) / 86400000) / differenceDate + lastX, 0) // move in horizontal till currentDay\r\n            }\r\n        } else {\r\n            if (basePrice == 0) graphic.lineTo(canvasWidth * ((new Date() - new Date(releaseDate)) / 86400000) / differenceDate, 300)\r\n            else graphic.lineTo(canvasWidth * ((new Date() - new Date(releaseDate)) / 86400000) / differenceDate, 0)\r\n        }\r\n\r\n        graphic.stroke()\r\n\r\n    }\r\n\r\n    const addOrDeleteGameWatchList = () => {\r\n        if (!user) return;\r\n        if (bellColor == \"black\") {\r\n            fetch(\"http://localhost:8081/watchlist?videogameId=\" + game.videogameId, {\r\n                method: 'POST',\r\n                body: JSON.stringify(user),\r\n                mode: 'cors',\r\n                headers: {\r\n                'Access-Control-Allow-Origin':'*',\r\n                'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(response => response.json())\r\n            .then(responseJSON => {\r\n                const userCopy = {...user};\r\n                userCopy.userList.push(responseJSON)\r\n                setUser(userCopy)\r\n            })\r\n            setBellColor(\"#0474db\");\r\n        } else {\r\n            let userCopy = {...user};\r\n            const watchlistItem = userCopy.userList.find(item => item.videogameId == game.videogameId);\r\n            userCopy.userList = userCopy.userList.filter(item => item.videogameId != game.videogameId);\r\n            fetch(\"http://localhost:8081/watchlist\", {\r\n                method: 'DELETE',\r\n                body: JSON.stringify(watchlistItem),\r\n                mode: 'cors',\r\n                headers: {\r\n                'Access-Control-Allow-Origin':'*',\r\n                'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            setBellColor(\"black\");\r\n            setUser(userCopy);\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            <Navbar user={user} setUser={setUser}/>\r\n            <div id=\"game-container\">\r\n                <div id=\"game-title-container\">\r\n                    <p id=\"game-title\">{game.title}</p>\r\n                    <p><i onClick={addOrDeleteGameWatchList} style={{color: bellColor}} id=\"game-bell\" className=\"fa-regular fa-bell\"></i></p>\r\n                </div>\r\n                <div id=\"game-information-container\">\r\n                    <div id=\"game-information\">\r\n                        <div className=\"game-inf-item\">\r\n                            <p className=\"game-inf-title\">type:</p>\r\n                            <p>{game.type}</p>\r\n                        </div>\r\n                        <div className=\"game-inf-item\">\r\n                            <p className=\"game-inf-title\">developer:</p>\r\n                            <p>{game.developer}</p>\r\n                        </div>\r\n                        <div className=\"game-inf-item\">\r\n                            <p className=\"game-inf-title\">publisher:</p>\r\n                            <p>{game.publisher}</p>\r\n                        </div>\r\n                        <div className=\"game-inf-item\">\r\n                            <p className=\"game-inf-title\">release date:</p>\r\n                            <p>{game.releaseDate}</p>\r\n                        </div>\r\n                        <div className=\"game-inf-item\">\r\n                            <p className=\"game-inf-title\">categories:</p>\r\n                            <p>{categories.join(\", \")}</p>\r\n                        </div>\r\n                        <div className=\"game-inf-item\">\r\n                            <p className=\"game-inf-title\">systems:</p>\r\n                            <p>{systems.join(\", \")}</p>\r\n                        </div>\r\n                        <div id=\"contents-container\">\r\n                            <p id=\"contents-title\">contents:</p>\r\n                            <ul id=\"contents-list\">\r\n                                {contents.map((content, index) => <li key={index}>{content}</li>)}\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"img-container\">\r\n                        {game.cover == null ? null : <img src={\"data:image/png;base64,\" + game.cover} id=\"game-img\" />}\r\n                    </div>\r\n                </div>\r\n                <div id=\"game-middle-container\">\r\n                    <div id=\"game-middle-item-text\">\r\n                        <div>\r\n                            <p id=\"description-title\">Description</p>\r\n                            <p id=\"description-text\">{game.description}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"game-middle-item-lang-sub\">\r\n                        <div id=\"lang-sub-container\">\r\n                            <div id=\"lang-sub-title\">\r\n                                <p>lang</p>\r\n                                <p>sub</p>\r\n                            </div>\r\n                            <div>\r\n                                <ul id=\"lang-sub-list\">\r\n                                    {langSub()}\r\n                                </ul>                                \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div id=\"game-price-container\">\r\n                    <div>\r\n                        <p>base price</p>\r\n                        <p>{game.basePrice == 0 ? \"free game\" : game.basePrice + \"€\"}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p>discount</p>\r\n                        <p id=\"game-currentDiscount\">{game.currentDiscountedPrice != null ? game.currentDiscountedPrice + \"€\" : \"\"}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p>percentage</p>\r\n                        <p>{game.currentDiscountedPrice != null ? Math.round(100 - game.currentDiscountedPrice / (game.basePrice / 100)) + \"%\" : \"\"}</p>\r\n                    </div>\r\n                    <div>\r\n                        <p>end date</p>\r\n                        <p>{game.currentDiscountEndDate != null ? game.currentDiscountEndDate : \"\" }</p>\r\n                    </div>\r\n                    <div>\r\n                        <p>lowest price</p>\r\n                        <p id=\"game-lowestPrice\">{game.lowestPrice != null ? game.lowestPrice + \"€\" : \"\"}</p>\r\n                    </div>\r\n                </div>\r\n                <div id=\"game-priceHistory-container\">\r\n                    <canvas height=\"300\" width=\"1000\" id=\"game-priceHistory-graphic\"></canvas>\r\n                    <canvas height=\"300\" width=\"1000\" id=\"game-priceHistory-data\"></canvas>\r\n                    <div id=\"game-priceHistory-prices\">{prices}</div>\r\n                    <div id=\"game-priceHistory-dates\" style={{flexDirection: flexDirection}}>{dates}</div>\r\n                </div>\r\n                <div id=\"game-gamesReferenced-container\">\r\n                    <p id=\"game-gamesReferenced-title\">References</p>\r\n                    <div id=\"game-gamesReferenced-games\" >\r\n                        {gameReferenced.map((game, index) => <GameInlist key={index} game={game}/>)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport default SingleGamePage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}